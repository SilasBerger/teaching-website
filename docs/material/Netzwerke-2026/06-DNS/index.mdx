---
sidebar_label: DNS
sidebar_custom_props:
  source:
    name: ofi.gbsl.website
    ref: 'https://ofi.gbsl.website/26e/Netzwerke/DNS'
page_id: 39c2bba2-5e29-4114-ac7e-4f1d750d0b5c
---

import DefinitionList from "@tdev-components/DefinitionList";
import Excalidoc from '@tdev/excalidoc/Component';

# Domain-Name-System
::youtube[https://www.youtube.com/embed/t7PGgoZ6ips?si=joBr_JYc6Y3J5Dq0]

## TelefonbÃ¼cher
![--width=400px](img/telefonbuch.jpg)

IP-Adressen sind wie Telefonnummern: man kann sie sich nur schwer merken. FÃ¼r Telefonnummern gibt es deshalb Verzeichnisse, in welchen man die Nummer einer bestimmten Person nachschauen kann (entweder das gute alte Telefonbuch oder das modernere [tel.search.ch](https://tel.search.ch)). Man muss nur den Namen der Person und vielleicht noch die Wohnadresse kennen.

## Domain Name
Auch fÃ¼r das Internet gibt es solche Verzeichnisse. Wenn man den Namen einer bestimmten Webseite kennt, kann man im Verzeichnis die IP-Adresse des Servers nachschauen, der diese Seite im Internet anbietet.

Solche Namen sind zum Beispiel
-	www.instagram.com
-	www.gbsl.ch
-	[classrooms.app](https://classrooms.app)

Diese Namen werden als **Domain-Names** bezeichnet. Das Verzeichnis, wo sie drinstehen, heisst **Domain-Name-System**, kurz **DNS**.

### Aufbau von Domain-Namen
Domain-Namen (kurz: _Domains_) bestehen aus mehreren Teilen, die durch Punkte voneinander getrennt werden. Der letzte Teil eines Domain-Namens, also der Teil ganz rechts, wird als **Top-Level-Domain** (**TLD**) bezeichnet. In den obigen Beispielen sind das `com`, `ch` und `app`. Der Teil vor der TLD wird als **Subdomain** bezeichnet. Es kÃ¶nnen beliebig viele Subdomains aneinandergehÃ¤ngt werden. So ist zum Beispiel `www` eine Subdomain von `gbsl`, welche wiederum eine Subdomain der TLD `ch` ist:

ch
: die **TLD** (Top-Level-Domain) der Schweiz
gbsl.ch
: die Subdomain `gbsl` der TLD `ch`
: die sog. **Second-Level-Domain** (SLD) der `ch`-TLD 
www.gbsl.ch
: die Subdomain `www` der Subdomain `gbsl` der TLD `ch`

### Second-Level-Domain
Die erste Subdomain eines Domain-Namens wird auch als **Second-Level-Domain** (**SLD**) bezeichnet. Im obigen Beispiel ist das `gbsl`.

Es ist wichtig, bei einem Domain-Namen zu erkennen, was die SLD ist, denn wer eine Domain registrieren mÃ¶chte, wÃ¤hlt in der Regel eine freie SLD unter einer bestimmten TLD aus und kann dann beliebige Subdomains an diese SLD anhÃ¤ngen. So ist beispielsweise die Domain `instagram.com` bereits vergeben und kann nicht mehr registriert werden. WÃ¼rde man sich aber beispielsweise die Domain `notahacker.li` registrieren (sofern diese noch frei ist), kÃ¶nnte man die Subdomain `instagram` an diese Domain anhÃ¤ngen, also `instagram.notahacker.li`. FÃ¼r unwissende User:innen kÃ¶nnte das dann so aussehen, als ob es sich um die echte Instagram-Seite handelt, obwohl es eine ganz andere Seite ist. Solche Tricks werden von BetrÃ¼ger:innen gerne genutzt, um ahnungslose User:innen auf gefÃ¤lschte Seiten zu locken und dort z.B. persÃ¶nliche Daten zu stehlen oder Geld zu ergaunern.

In einigen LÃ¤ndern registriert man seine Domain auch erst auf der 3. Stufe, also nicht direkt auf der TLD. So ist es beispielsweise im Vereinigten KÃ¶nigreich Ã¼blich, Domains auf der 3. Stufe zu registrieren, also z.B. `example.co.uk` statt `example.uk`. In diesem Fall wÃ¤re die SLD also `co` und `uk` die TLD.

## Kernidee des DNS
> Namen kann man sich viel besser merken als Zahlen. Deshalb sind Webseiten im Internet mit einem Domain-Namen versehen. Im **Verzeichnis** der Domain-Namen, dem **Domain-Name-System**, kann man nachschauen, welches die IP-Adresse des Servers ist, der diese Seite anbietet.

## Funktionsweise des DNS
Es gibt auf der Welt bald **2 Milliarden**[^1] Webseiten, verteilt auf ca. 200 Millionen Server. Jeder Server beherbergt also durchschnittlich 10 Webseiten. FÃ¼r jeden dieser Server braucht es eine Ã¶ffentliche IP-Adresse, damit der Server im Internet erreichbar ist. Wenn man die IP-Adresse des Servers kennt, kÃ¶nnte man theoretisch versuchen im Browser statt des Domain-Namens einer Website direkt die IP-Adresse des Servers einzugeben, also statt www.instgram.com die IP-Adresse 157.240.17.174.

:::insight[IP-Adressen direkt eingeben]
Im obigen Beispiel wird behauptet, dass Sie die IP-Adresse von Instagram direkt in den Browser eintippen kÃ¶nnen. In der Praxis funktioniert das heutzutage aber nicht mehr, weil moderne Webseiten `https` statt `http` als Protokoll verwenden. Das `s` steht dabei fÃ¼r Â«secureÂ», also _sicher_. Bei `https` wird von Ihrem Browser mittels Zertifikat sichergestellt, dass die Adresse auf den korrekten Domain-Namen lautet. Dadurch wird verhindert, dass Sie auf eine falsche Seite umgeleitet werden, und dann unwissentlich z.B. eine Geldtransaktion vornehmen. Das fÃ¼hrt aber dazu, dass das Zertifikat bei IP-Adressen nicht gÃ¼ltig ist.

Eine zu Demonstrationszwecken verÃ¶ffentlichte Seite ohne https ist [login.gbsl.website](http://login.gbsl.website). Diese ist auch direkt Ã¼ber den entsprechenden Server [188.34.157.212](http://188.34.157.212) zu finden. Ihr Browser wird Sie aber (korrekterweise) warnen, dass die Verbindung nicht sicher ist, wenn Sie die IP-Adresse eingeben. Ob Sie die Seite trotzdem besuchen wollen, mÃ¼ssen Sie selbst entscheiden ğŸ˜‰.
:::

Wie schon in der Einleitung erwÃ¤hnt, wird aber niemand die IP-Adresse direkt eingeben, weil man sich diese nicht merken kann und sie mit der Zeit auch Ã¤ndern kÃ¶nnte (z.B. wenn die Website auf einen anderen Server gezÃ¼gelt wird). Abgesehen davon wÃ¼rde es auch nicht ausreichen, nur die IP-Adresse anzugeben, weil ja eben mehrere Websites an einer bestimmten Adresse Â«zuhauseÂ» sein kÃ¶nnen â€“ der sogenannte **Port** mÃ¼sste ebenfalls bekannt sein.

:::insight[Ports]
Ein Port spezifiziert, welche Applikation auf einem Server die Anfrage behandeln soll.

Auf dem Server [188.34.157.212](http://188.34.157.212) sind mehrere Websites, und mit dem richtigen Port kann ausgewÃ¤hlt werden, welche man mÃ¶chte:

<DefinitionList>
  <dt>Port 80[^2]</dt>
  <dd>[188.34.157.212:80](http://188.34.157.212:80) â†’ [login.gbsl.website](http://login.gbsl.website)</dd>
  <dt>Port 8080</dt>
  <dd>[188.34.157.212:8080](http://188.34.157.212:8080) â†’ [hacksql.gbsl.website](https://hacksql.gbsl.website)</dd>
</DefinitionList>

Nun wird deutlich, dass es erst recht schwierig wÃ¼rde, sich auch noch alle Ports zu merkenâ€¦
:::

Die Frage ist nun aber: Wie kann man 2 Milliarden Domain-Namen in einem Verzeichnis verwalten? WÃ¼rde man dies in Form eines Buches versuchen, so ergÃ¤be das ein Buch mit ca. **4 Millionen Seiten** (500 AdresseintrÃ¤ge pro Seite). Hinzu kommt, dass diese Adressen laufend angepasst werden mÃ¼ssten. Neue Adressen kommen hinzu, andere Ã¤ndern oder verschwinden. Ganz zu schweigen von der schieren UnmÃ¶glichkeit, in einem solchen Buch eine gesuchte Adresse zu finden.

In elektronischer Form ist dieses Problem nicht so gross. 2 Milliarden Adressen ergeben eine Datenmenge von ca. **2 Terrabyte**, wenn man grosszÃ¼gig 1 KB (1000 Zeichen) pro Adresse annimmt. Eine Harddisk mit so viel Platz kriegt man fÃ¼r einige zehn Franken. Allerdings bleibt das Problem mit den dauernden Ã„nderungen. Eine zentrale Stelle, welche dieses Verzeichnis fÃ¼hren mÃ¼sste, wÃ¤re wohl schnell Ã¼berfordert. Zudem bestÃ¼nde auch ein grosses Risiko, dass ein Ausfall dieser zentralen Stelle das ganze Internet lahmlegen kÃ¶nnte. Schliesslich mÃ¼sste ein solches Verzeichnis auch auf einem sehr, sehr leistungsfÃ¤higen Server betrieben werden, denn bei ca. 5 Milliarden Internetnutzern weltweit, die dauernd irgendwelche IP-Adressen brauchen, ist mit einer enormen Flut von Anfragen zu rechnen.

Aus diesen GrÃ¼nden haben die Erfinder des Domain-Name-Systems einen anderen Weg eingeschlagen: Das Verzeichnis ist
-	erstens **hierarchisch gegliedert** und
-	zweitens auf viele DNS-Server weltweit **verteilt** (man sagt **dezentral**), wobei jeder Server nur die Adressen in seiner Zone kennt und fÃ¼r alle anderen Adressen auf weitere DNS-Server verweist.


Untenstehendes Bild zeigt diese Hierarchie. Auf der obersten Ebene befinden sich die sogenannten **Top-Level-Domains** (**TLD**), z.B. **ch**, **de**, **org** oder **com**. Diese sind unter einer namenlosen Root-Domain zusammengefasst (Punkt im obersten KÃ¤stchen auf dem Bild). Unterhalb einer TLD kÃ¶nnen dann **beliebig viele Subdomains** angehÃ¤ngt werden. Liest man nun von unten beginnend, die Namen der Subdomains auf einem Pfad bis zur Root-Domain, so entsteht ein vollstÃ¤ndiger Domain-Name, z.B. en.wikipedia.org.

<div id="dns-schema"></div>

![](img/dns-schema.png)

Im Bild sind **drei DNS-Server** mit ihrer jeweiligen **Zone** (grau) eingezeichnet. Jeder DNS-Server verwaltet den Teil der Adressinformationen, der zu seiner Zone gehÃ¶rt. Die IP-Adresse zum Domain-Namen en.wikipedia.org, also 91.198.174.192, kennt dabei nur der unterste DNS-Server, denn er ist fÃ¼r die Zone, in welche dieser Domain-Name schliesslich gehÃ¶rt, zustÃ¤ndig.

Wird einer der Ã¼bergeordneten DNS-Server nach dieser IP-Adresse gefragt, so verweist er als Antwort nur auf den nÃ¤chsttieferen DNS-Server, mit dem Hinweis, man solle dort weiterfragen. Das geht dann so weiter, bis der Frager beim untersten DNS-Server angelangt ist und die IP-Adresse als Antwort erhÃ¤lt.

Man kann diese Situation mit jemandem vergleichen, der sich in einer fremden Stadt Ã¼ber mehrere Stationen zu seinem Hotel durchfragt.

:::aufgabe[DNS-EintrÃ¤ge nachschlagen]
<TaskState id='d9dafe49-94db-45d0-9fd8-72f0a31196d6' />
Um im DNS einen Eintrag nachzuschlagen (also fÃ¼r eine Domain oder Subdomain die entsprechende IP herauszufinden), kÃ¶nnen Sie in der Kommandozeile (Windows: Â«EingabeaufforderungÂ», macOS: Â«TerminalÂ») folgenden Befehl eingeben:

```sh title="In der Kommandozeile"
nslookup gbsl.ch
```

Die Ausgabe dieses Befehls sieht ungefÃ¤hr so aus:

```shell
Server:		100.100.100.100
Address:	100.100.100.100#53

Non-authoritative answer:
Name:	gbsl.ch
Address: 213.144.128.144
```

Unter `Non-authoritative answer` finden wir die Adresse, die wir suchen. Im obigen Beispiel lautet diese also `213.144.128.144`

Finden Sie die IP-Adresse fÃ¼r folgende Domains und Subdomains heraus. Falls mehrere IPs angegeben werden, wÃ¤hlen Sie eine davon aus.

<String label="silasberger.ch" id="f36851d6-ff3e-4b60-a138-bbd13b33f251" solution="83.166.133.69" />
<String
  label="inf.gbsl.website"
  id="8643f983-ca36-4b63-903c-54175f9464b3"
  solution="185.199.110.153"
  sanitizer={(val) => {
    const solutions = ['185.199.110.153', '185.199.109.153', '185.199.108.153', '185.199.111.153'];
    return solutions.includes(val) ? solutions[0] : val;
  }}/>
<String
  label="hacksql.gbsl.website"
  id="9ef79248-4d25-4d91-ba2f-65286f28ff8b"
  solution="188.114.96.2"
  sanitizer={(val) => {
    const solutions = ['188.114.96.2', '188.114.97.2'];
    return solutions.includes(val) ? solutions[0] : val;
  }}/>
:::

:::aufgabe[DNS-Baum erstellen]
<TaskState id="dda9822d-fb14-4db3-9ac9-bef64bdf43ff" />
Zeichnen Sie die hierarchische Struktur, in der die folgenden Domain-Namen vorkommen:
- `postfinance.ch`
- `apple.com`
- `wikipedia.org`
- `account.juiceshop.de`
- `order.juiceshop.de`
- `hostpoint.ch`

<Excalidoc id="e8ab9e85-5cff-4687-8298-c100596cecd2" />

<Solution id="739fdc8a-e6be-4b54-a818-cc0b8dee67e6">
![](img/dns-tree-solution.png)
</Solution>
:::

## Wer verwaltet Domain-Namen?
Die hierarchische Gliederung des Domain-Name-Systems erlaubt es, die Verwaltung zu **dezentralisieren**. So gibt es fÃ¼r jede Top-Level-Domain eine Organisation, welche die Namen der darunter angesiedelten Subdomains verwaltet. FÃ¼r die TLD der Schweiz (ch) und Liechtenstein (li) ist die Stiftung [SWITCH](https://www.switch.ch/) zustÃ¤ndig.

:::insight[Domain registrieren]
Die SWITCH betreibt unter dem Link https://www.nic.ch/de/ einen Dienst zur ÃœberprÃ¼fung, ob eine bestimmte Subdomain noch verfÃ¼gbar ist. Das Registrieren einer Subdomain delegiert die SWITCH an sogenannte **Registrare**, also an Unternehmen die Domain-Namen anbieten und verkaufen. Bekannte (und gÃ¼nstige) Registrare sind:
- [Swizzonic.ch](https://swizzonic.ch/)
- [Gandi.net](https://www.gandi.net/)
- [hostech](https://www.hosttech.ch/domains)
- [Infomaniak](https://www.infomaniak.com/de/domains)

JÃ¤hrlich muss fÃ¼r eine .ch Domain zwischen 5 und 20 Franken gerechnet werden.
:::

:::aufgabe[Registrar herausfinden]
<TaskState id="40af35ae-a083-4960-9288-706212d3621c" />

Es gibt Websites, Ã¼ber welche man herausfinden kann, von wem ein bestimmter Domain-Name registriert wurde (Registrar) und wem dieser Name gehÃ¶rt (Registrant). Drei davon sind:
- https://www.hostpoint.ch/domains/whois.html	(TLDs ch, li, â€¦)
- https://www.whois.com/whois/ (TLDs com, org, edu, website, â€¦)
- http://whois.nic.swiss/ (TLD swiss)

Finden Sie fÃ¼r die folgenden Domains heraus, bei welchem Registrar sie registriert sind:
- `gbsl.website`
- `gbsl.ch`
- `silasberger.ch`

Halten Sie Ihre Ergebnisse hier fest:
<QuillV2 id='a3dee146-c96e-44bf-b6f1-7ef2b22ff5f0' />

<Solution id='4fc07ba3-8b6f-4ad7-bb5a-2a2f8d1f6545'>
  `gbsl.website`
  : Gandi.net
  `gbsl.ch`
  : Swizzonic
  `silasberger.ch`
  : Infomaniak
</Solution>
:::

[^1]: Quelle: [internetlivestats](https://www.internetlivestats.com/total-number-of-websites/)
[^2]: Port 80 ist der Standard-Port fÃ¼r Websites mit dem http Protokoll und kann deshalb auch weggelassen werden
